<section class="min-h-screen bg-gray-50 py-8">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <!-- Loading State -->
    @if (loading()) {
    <div class="flex flex-col items-center justify-center py-16">
      <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mb-4"></div>
      <p class="text-gray-600 text-lg">Loading product details...</p>
    </div>
    }

    <!-- Error State -->
    @if (error()) {
    <div class="text-center py-16">
      <div class="bg-red-50 border border-red-200 rounded-lg p-6 max-w-md mx-auto">
        <h2 class="text-2xl font-bold text-red-800 mb-2">Error</h2>
        <p class="text-red-600 mb-4">{{ error() }}</p>
        <button
          (click)="getProductDetailsData()"
          class="bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition-colors"
        >
          Retry
        </button>
      </div>
    </div>
    }

    <!-- Product Details -->
    @if (!loading() && !error() && productDetails()._id) {
    <div class="relative bg-white rounded-3xl shadow-2xl overflow-hidden animate-fade-in-up">
      <!-- Floating decorative elements -->
      <div
        class="absolute top-10 left-10 w-20 h-20 bg-gradient-to-br from-blue-400/20 to-purple-400/20 rounded-full animate-float"
      ></div>
      <div
        class="absolute top-32 right-16 w-16 h-16 bg-gradient-to-br from-pink-400/20 to-yellow-400/20 rounded-full animate-float"
        style="animation-delay: 1s"
      ></div>
      <div
        class="absolute bottom-20 left-20 w-12 h-12 bg-gradient-to-br from-green-400/20 to-blue-400/20 rounded-full animate-float"
        style="animation-delay: 2s"
      ></div>
      <!-- Product Header -->
      <div
        class="relative bg-gradient-to-br from-indigo-600 via-purple-600 to-pink-600 text-white overflow-hidden"
      >
        <!-- Animated background pattern -->
        <div
          class="absolute inset-0 bg-gradient-to-r from-blue-400/20 to-purple-400/20 animate-pulse"
        ></div>
        <div
          class="absolute top-0 left-0 w-full h-full bg-[url('data:image/svg+xml,%3Csvg%20width%3D%2260%22%20height%3D%2260%22%20viewBox%3D%220%200%2060%2060%22%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%3E%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%3Cg%20fill%3D%22%23ffffff%22%20fill-opacity%3D%220.05%22%3E%3Ccircle%20cx%3D%2230%22%20cy%3D%2230%22%20r%3D%222%22/%3E%3C/g%3E%3C/g%3E%3C/svg%3E')] opacity-30"
        ></div>

        <div class="relative p-8 text-center">
          <div class="animate-fade-in-up">
            <h1
              class="text-5xl font-extrabold mb-6 bg-gradient-to-r from-white to-blue-100 bg-clip-text text-transparent drop-shadow-lg"
            >
              {{ productDetails().title }}
            </h1>
            <div class="flex justify-center items-center gap-8 flex-wrap">
              <div
                class="bg-white/20 backdrop-blur-sm rounded-2xl px-6 py-3 border border-white/30 shadow-xl"
              >
                <span class="text-4xl font-black text-green-300 drop-shadow-lg"
                  >${{ productDetails().price }}</span
                >
              </div>
              <div
                class="flex items-center gap-3 bg-white/20 backdrop-blur-sm rounded-2xl px-6 py-3 border border-white/30 shadow-xl"
              >
                <div class="flex items-center">
                  <span class="text-yellow-300 text-2xl animate-bounce">⭐</span>
                  <span
                    class="text-yellow-300 text-2xl animate-bounce"
                    style="animation-delay: 0.1s"
                    >⭐</span
                  >
                  <span
                    class="text-yellow-300 text-2xl animate-bounce"
                    style="animation-delay: 0.2s"
                    >⭐</span
                  >
                  <span
                    class="text-yellow-300 text-2xl animate-bounce"
                    style="animation-delay: 0.3s"
                    >⭐</span
                  >
                  <span
                    class="text-yellow-300 text-2xl animate-bounce"
                    style="animation-delay: 0.4s"
                    >⭐</span
                  >
                </div>
                <span class="text-xl font-bold text-white drop-shadow-lg">
                  {{ productDetails().ratingsAverage }}/5
                </span>
                <span class="text-sm text-blue-100">
                  ({{ productDetails().ratingsQuantity }} reviews)
                </span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 p-8">
        <!-- Image Gallery -->
        <div class="space-y-6 animate-slide-in-left">
          @if (images().length > 0) {
          <div class="owl-carousel-container group relative">
            <!-- Floating decorative elements -->
            <div
              class="absolute -top-4 -left-4 w-8 h-8 bg-gradient-to-br from-blue-400/30 to-purple-400/30 rounded-full animate-float"
            ></div>
            <div
              class="absolute -top-2 -right-6 w-6 h-6 bg-gradient-to-br from-pink-400/30 to-yellow-400/30 rounded-full animate-float"
              style="animation-delay: 1s"
            ></div>
            <div
              class="absolute -bottom-4 -left-2 w-4 h-4 bg-gradient-to-br from-green-400/30 to-blue-400/30 rounded-full animate-float"
              style="animation-delay: 2s"
            ></div>

            <div
              class="relative overflow-hidden rounded-3xl shadow-2xl border-4 border-white/20 bg-gradient-to-br from-gray-50 via-white to-gray-100 backdrop-blur-sm"
            >
              <!-- Animated background pattern -->
              <div
                class="absolute inset-0 bg-gradient-to-r from-blue-400/5 via-purple-400/5 to-pink-400/5 animate-pulse"
              ></div>
              <div
                class="absolute inset-0 bg-[url('data:image/svg+xml,%3Csvg%20width%3D%2260%22%20height%3D%2260%22%20viewBox%3D%220%200%2060%2060%22%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%3E%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%3Cg%20fill%3D%22%23ffffff%22%20fill-opacity%3D%220.1%22%3E%3Ccircle%20cx%3D%2230%22%20cy%3D%2230%22%20r%3D%222%22/%3E%3C/g%3E%3C/g%3E%3C/svg%3E')] opacity-20"
              ></div>

              <!-- Main Image Carousel -->
              <owl-carousel-o [options]="carouselOptions" class="main-carousel">
                <ng-template carouselSlide *ngFor="let image of images(); let i = index">
                  <div class="relative group-hover:scale-105 transition-all duration-700 ease-out">
                    <!-- Image with enhanced styling -->
                    <div class="relative overflow-hidden rounded-2xl">
                      <img
                        [src]="image"
                        [alt]="'Product image ' + (i + 1)"
                        class="w-full h-[500px] object-cover transition-all duration-700 group-hover:scale-110"
                      />
                      <!-- Multi-layer overlays for depth -->
                      <div
                        class="absolute inset-0 bg-gradient-to-t from-black/30 via-transparent to-transparent rounded-2xl"
                      ></div>
                      <div
                        class="absolute inset-0 bg-gradient-to-br from-blue-500/10 via-transparent to-purple-500/10 rounded-2xl"
                      ></div>
                      <div
                        class="absolute inset-0 bg-gradient-to-tl from-transparent via-white/5 to-transparent rounded-2xl"
                      ></div>
                    </div>

                    <!-- Image number indicator -->
                    <div
                      class="absolute top-4 left-4 bg-black/70 backdrop-blur-sm text-white px-3 py-1 rounded-full text-sm font-medium"
                    >
                      {{ i + 1 }} / {{ images().length }}
                    </div>

                    <!-- Zoom indicator -->
                    <div
                      class="absolute top-4 right-4 bg-white/90 backdrop-blur-sm text-gray-800 p-2 rounded-full opacity-0 group-hover:opacity-100 transition-all duration-300 hover:scale-110 cursor-pointer"
                    >
                      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"
                        ></path>
                      </svg>
                    </div>
                  </div>
                </ng-template>
              </owl-carousel-o>

              <!-- Enhanced floating action buttons -->
              <div
                class="absolute top-4 right-4 flex flex-col gap-3 opacity-0 group-hover:opacity-100 transition-all duration-500 transform translate-y-2 group-hover:translate-y-0"
              >
                <button
                  class="bg-white/90 backdrop-blur-md hover:bg-white text-gray-800 p-3 rounded-full shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-110 hover:rotate-12 border border-white/20"
                >
                  <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"
                    ></path>
                  </svg>
                </button>
                <button
                  class="bg-white/90 backdrop-blur-md hover:bg-white text-gray-800 p-3 rounded-full shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-110 hover:-rotate-12 border border-white/20"
                >
                  <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"
                    ></path>
                  </svg>
                </button>
              </div>
            </div>
          </div>
          } @else {
          <div
            class="relative overflow-hidden rounded-3xl shadow-2xl border-4 border-white/20 bg-gradient-to-br from-gray-50 via-white to-gray-100 backdrop-blur-sm p-8 flex items-center justify-center h-[500px]"
          >
            <!-- Animated background pattern -->
            <div
              class="absolute inset-0 bg-gradient-to-r from-blue-400/5 via-purple-400/5 to-pink-400/5 animate-pulse"
            ></div>
            <div class="text-center relative z-10">
              <div
                class="w-24 h-24 mx-auto mb-4 bg-gradient-to-br from-blue-100 via-purple-100 to-pink-100 rounded-full flex items-center justify-center shadow-lg animate-pulse-slow"
              >
                <svg
                  class="w-12 h-12 text-blue-500"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"
                  ></path>
                </svg>
              </div>
              <img
                [src]="productDetails().imageCover"
                [alt]="productDetails().title"
                class="max-w-full max-h-80 object-contain rounded-2xl shadow-lg transition-all duration-500 hover:scale-105"
              />
            </div>
          </div>
          }
        </div>

        <!-- Product Information -->
        <div class="space-y-8 animate-slide-in-right">
          <!-- Description -->
          <div
            class="group relative bg-gradient-to-br from-blue-50/80 via-indigo-50/80 to-purple-50/80 backdrop-blur-md rounded-3xl p-8 border border-blue-100/50 shadow-xl hover:shadow-2xl transition-all duration-500 hover:-translate-y-2 hover:scale-[1.02]"
          >
            <!-- Animated background elements -->
            <div
              class="absolute inset-0 bg-gradient-to-r from-blue-400/5 via-purple-400/5 to-pink-400/5 rounded-3xl animate-pulse"
            ></div>
            <div
              class="absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-blue-200/20 to-purple-200/20 rounded-full -translate-y-16 translate-x-16 animate-float"
            ></div>
            <div
              class="absolute bottom-0 left-0 w-24 h-24 bg-gradient-to-br from-pink-200/20 to-yellow-200/20 rounded-full translate-y-12 -translate-x-12 animate-float"
              style="animation-delay: 1s"
            ></div>

            <div class="relative z-10">
              <h3
                class="text-3xl font-bold text-gray-800 mb-6 flex items-center group-hover:text-blue-600 transition-all duration-300 group-hover:scale-105"
              >
                <div
                  class="w-12 h-12 bg-gradient-to-br from-blue-500 via-purple-600 to-pink-600 rounded-2xl flex items-center justify-center mr-4 shadow-lg group-hover:shadow-xl group-hover:rotate-12 transition-all duration-300"
                >
                  <svg
                    class="w-6 h-6 text-white group-hover:scale-110 transition-transform duration-300"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
                    ></path>
                  </svg>
                </div>
                <span
                  class="bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent"
                >
                  Description
                </span>
              </h3>
              <div class="relative">
                <p
                  class="text-gray-700 leading-relaxed text-lg group-hover:text-gray-800 transition-all duration-300 group-hover:translate-x-2"
                >
                  {{ productDetails().description }}
                </p>
                <!-- Decorative line -->
                <div
                  class="absolute -left-4 top-0 w-1 h-full bg-gradient-to-b from-blue-400 via-purple-400 to-pink-400 rounded-full opacity-0 group-hover:opacity-100 transition-all duration-500"
                ></div>
              </div>
            </div>
          </div>

          <!-- Product Specifications -->
          <div
            class="group relative bg-white/90 backdrop-blur-md rounded-3xl p-8 shadow-xl border border-gray-100/50 hover:shadow-2xl transition-all duration-500 hover:-translate-y-2 hover:scale-[1.02]"
          >
            <!-- Animated background elements -->
            <div
              class="absolute inset-0 bg-gradient-to-r from-green-400/5 via-blue-400/5 to-purple-400/5 rounded-3xl animate-pulse"
            ></div>
            <div
              class="absolute top-0 left-0 w-28 h-28 bg-gradient-to-br from-green-200/20 to-blue-200/20 rounded-full -translate-y-14 -translate-x-14 animate-float"
            ></div>
            <div
              class="absolute bottom-0 right-0 w-20 h-20 bg-gradient-to-br from-purple-200/20 to-pink-200/20 rounded-full translate-y-10 translate-x-10 animate-float"
              style="animation-delay: 1.5s"
            ></div>

            <div class="relative z-10">
              <h3
                class="text-3xl font-bold text-gray-800 mb-8 flex items-center group-hover:text-green-600 transition-all duration-300 group-hover:scale-105"
              >
                <div
                  class="w-12 h-12 bg-gradient-to-br from-green-500 via-blue-600 to-purple-600 rounded-2xl flex items-center justify-center mr-4 shadow-lg group-hover:shadow-xl group-hover:rotate-12 transition-all duration-300"
                >
                  <svg
                    class="w-6 h-6 text-white group-hover:scale-110 transition-transform duration-300"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"
                    ></path>
                  </svg>
                </div>
                <span
                  class="bg-gradient-to-r from-green-600 via-blue-600 to-purple-600 bg-clip-text text-transparent"
                >
                  Product Information
                </span>
              </h3>
              <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
                <div
                  class="group/spec relative flex items-center p-6 bg-gradient-to-br from-blue-50/80 to-blue-100/80 backdrop-blur-sm rounded-2xl border border-blue-200/50 hover:shadow-xl transition-all duration-500 hover:scale-105 hover:-translate-y-2 hover:rotate-1"
                >
                  <!-- Animated background -->
                  <div
                    class="absolute inset-0 bg-gradient-to-r from-blue-400/10 to-purple-400/10 rounded-2xl opacity-0 group-hover/spec:opacity-100 transition-all duration-500"
                  ></div>
                  <div
                    class="absolute top-2 right-2 w-3 h-3 bg-blue-400 rounded-full opacity-0 group-hover/spec:opacity-100 group-hover/spec:animate-ping transition-all duration-500"
                  ></div>

                  <div
                    class="w-14 h-14 bg-gradient-to-br from-blue-500 via-blue-600 to-purple-600 rounded-2xl flex items-center justify-center mr-4 shadow-lg group-hover/spec:scale-110 group-hover/spec:rotate-12 transition-all duration-300 relative z-10"
                  >
                    <svg
                      class="w-7 h-7 text-white group-hover/spec:scale-110 transition-transform duration-300"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"
                      ></path>
                    </svg>
                  </div>
                  <div class="relative z-10">
                    <span
                      class="text-sm font-semibold text-blue-600 uppercase tracking-wide group-hover/spec:text-blue-700 transition-colors duration-300"
                      >Brand</span
                    >
                    <p
                      class="text-xl font-bold text-gray-800 group-hover/spec:text-blue-700 transition-all duration-300 group-hover/spec:translate-x-1"
                    >
                      {{ productDetails().brand.name || 'N/A' }}
                    </p>
                  </div>
                </div>

                <div
                  class="group/spec relative flex items-center p-6 bg-gradient-to-br from-green-50/80 to-green-100/80 backdrop-blur-sm rounded-2xl border border-green-200/50 hover:shadow-xl transition-all duration-500 hover:scale-105 hover:-translate-y-2 hover:-rotate-1"
                >
                  <!-- Animated background -->
                  <div
                    class="absolute inset-0 bg-gradient-to-r from-green-400/10 to-blue-400/10 rounded-2xl opacity-0 group-hover/spec:opacity-100 transition-all duration-500"
                  ></div>
                  <div
                    class="absolute top-2 right-2 w-3 h-3 bg-green-400 rounded-full opacity-0 group-hover/spec:opacity-100 group-hover/spec:animate-ping transition-all duration-500"
                  ></div>

                  <div
                    class="w-14 h-14 bg-gradient-to-br from-green-500 via-green-600 to-blue-600 rounded-2xl flex items-center justify-center mr-4 shadow-lg group-hover/spec:scale-110 group-hover/spec:-rotate-12 transition-all duration-300 relative z-10"
                  >
                    <svg
                      class="w-7 h-7 text-white group-hover/spec:scale-110 transition-transform duration-300"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"
                      ></path>
                    </svg>
                  </div>
                  <div class="relative z-10">
                    <span
                      class="text-sm font-semibold text-green-600 uppercase tracking-wide group-hover/spec:text-green-700 transition-colors duration-300"
                      >Category</span
                    >
                    <p
                      class="text-xl font-bold text-gray-800 group-hover/spec:text-green-700 transition-all duration-300 group-hover/spec:translate-x-1"
                    >
                      {{ productDetails().category.name || 'N/A' }}
                    </p>
                  </div>
                </div>

                <div
                  class="group/spec relative flex items-center p-6 bg-gradient-to-br from-yellow-50/80 to-yellow-100/80 backdrop-blur-sm rounded-2xl border border-yellow-200/50 hover:shadow-xl transition-all duration-500 hover:scale-105 hover:-translate-y-2 hover:rotate-1 sm:col-span-2"
                >
                  <!-- Animated background -->
                  <div
                    class="absolute inset-0 bg-gradient-to-r from-yellow-400/10 to-orange-400/10 rounded-2xl opacity-0 group-hover/spec:opacity-100 transition-all duration-500"
                  ></div>
                  <div
                    class="absolute top-2 right-2 w-3 h-3 bg-yellow-400 rounded-full opacity-0 group-hover/spec:opacity-100 group-hover/spec:animate-ping transition-all duration-500"
                  ></div>

                  <div
                    class="w-14 h-14 bg-gradient-to-br from-yellow-500 via-yellow-600 to-orange-600 rounded-2xl flex items-center justify-center mr-4 shadow-lg group-hover/spec:scale-110 group-hover/spec:rotate-12 transition-all duration-300 relative z-10"
                  >
                    <svg
                      class="w-7 h-7 text-white group-hover/spec:scale-110 transition-transform duration-300"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"
                      ></path>
                    </svg>
                  </div>
                  <div class="relative z-10">
                    <span
                      class="text-sm font-semibold text-yellow-600 uppercase tracking-wide group-hover/spec:text-yellow-700 transition-colors duration-300"
                      >Available</span
                    >
                    <p
                      class="text-xl font-bold text-gray-800 group-hover/spec:text-yellow-700 transition-all duration-300 group-hover/spec:translate-x-1"
                    >
                      {{ productDetails().quantity }} units
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Action Buttons -->
          <div class="space-y-6">
            <!-- Quantity Controls -->
            <div class="bg-white/90 backdrop-blur-md rounded-3xl p-6 shadow-xl border border-gray-100/50">
              <h3 class="text-lg font-semibold text-gray-800 mb-4">Quantity</h3>
              <div class="flex items-center justify-center space-x-4">
                <button (click)="decrementQuantity()" 
                        [disabled]="quantity() <= 1"
                        class="w-12 h-12 rounded-full border-2 border-gray-300 flex items-center justify-center hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 hover:scale-110">
                  <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4" />
                  </svg>
                </button>
                
                <span class="text-2xl font-bold text-gray-800 min-w-[3rem] text-center">{{ quantity() }}</span>
                
                <button (click)="incrementQuantity()" 
                        class="w-12 h-12 rounded-full border-2 border-gray-300 flex items-center justify-center hover:bg-gray-50 transition-all duration-300 hover:scale-110">
                  <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
                  </svg>
                </button>
              </div>
            </div>

            <!-- Primary Action Button -->
            <button (click)="addToCart()"
              [class]="isInCart() ? 'group relative w-full bg-gradient-to-r from-green-600 via-green-700 to-green-800 hover:from-green-700 hover:via-green-800 hover:to-green-900 text-white font-bold py-6 px-8 rounded-2xl transition-all duration-700 transform hover:scale-110 hover:-translate-y-2 shadow-2xl hover:shadow-3xl overflow-hidden backdrop-blur-sm border border-white/20' : 'group relative w-full bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 hover:from-blue-700 hover:via-purple-700 hover:to-pink-700 text-white font-bold py-6 px-8 rounded-2xl transition-all duration-700 transform hover:scale-110 hover:-translate-y-2 shadow-2xl hover:shadow-3xl overflow-hidden backdrop-blur-sm border border-white/20'"
            >
              <!-- Animated background elements -->
              <div
                class="absolute inset-0 bg-gradient-to-r from-white/20 via-transparent to-white/20 opacity-0 group-hover:opacity-100 transition-all duration-700"
              ></div>
              <div
                class="absolute top-0 left-0 w-full h-full bg-gradient-to-r from-transparent via-white/10 to-transparent transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-1000"
              ></div>

              <!-- Floating particles -->
              <div
                class="absolute top-2 left-4 w-2 h-2 bg-white/60 rounded-full opacity-0 group-hover:opacity-100 group-hover:animate-ping transition-all duration-500"
              ></div>
              <div
                class="absolute top-4 right-6 w-1 h-1 bg-white/40 rounded-full opacity-0 group-hover:opacity-100 group-hover:animate-ping transition-all duration-700"
                style="animation-delay: 0.2s"
              ></div>
              <div
                class="absolute bottom-3 left-8 w-1.5 h-1.5 bg-white/50 rounded-full opacity-0 group-hover:opacity-100 group-hover:animate-ping transition-all duration-600"
                style="animation-delay: 0.4s"
              ></div>

              <div class="relative flex items-center justify-center z-10">
                <div
                  class="w-8 h-8 bg-white/20 rounded-full flex items-center justify-center mr-4 group-hover:scale-125 group-hover:rotate-12 transition-all duration-500 shadow-lg"
                >
                  @if (isInCart()) {
                    <svg class="w-5 h-5 group-hover:scale-110 transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                    </svg>
                  } @else {
                    <svg class="w-5 h-5 group-hover:scale-110 transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5M7 13l2.5 5m6-5v6a2 2 0 01-2 2H9a2 2 0 01-2-2v-6m8 0V9a2 2 0 00-2-2H9a2 2 0 00-2 2v4.01" />
                    </svg>
                  }
                </div>
                <span class="text-xl group-hover:scale-105 transition-transform duration-300">
                  {{ isInCart() ? 'Added to Cart' : 'Add to Cart' }}
                </span>
                <div
                  class="ml-4 w-2 h-2 bg-white rounded-full animate-pulse group-hover:animate-bounce"
                ></div>
              </div>

              <!-- Shimmer effect -->
              <div
                class="absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-1000"
              ></div>
            </button>
          </div>
        </div>
      </div>
    </div>
    }

    <!-- No Product Found -->
    @if (!loading() && !error() && !productDetails()._id) {
    <div class="text-center py-16">
      <div class="bg-white rounded-2xl shadow-xl p-12 max-w-md mx-auto">
        <svg
          class="w-24 h-24 text-gray-400 mx-auto mb-6"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M9.172 16.172a4 4 0 015.656 0M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
          ></path>
        </svg>
        <h2 class="text-2xl font-bold text-gray-800 mb-4">Product Not Found</h2>
        <p class="text-gray-600">
          The product you're looking for doesn't exist or has been removed.
        </p>
      </div>
    </div>
    }
  </div>
</section>
